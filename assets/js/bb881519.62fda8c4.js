"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[143],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9076:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p},default:function(){return u}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],l={title:"Internationalization"},s={unversionedId:"api/i18n",id:"api/i18n",isDocsHomePage:!1,title:"Internationalization",description:"The bot you are developing is likely to be used by people which primary language is not English. To support these users, Botrino encourages the externalization of strings so they can be translated more conveniently.",source:"@site/docs/api/i18n.md",sourceDirName:"api",slug:"/api/i18n",permalink:"/docs/api/i18n",editUrl:"https://github.com/Alex1304/botrino/edit/main/website/docs/api/i18n.md",version:"current",frontMatter:{title:"Internationalization"},sidebar:"someSidebar",previous:{title:"Extensions",permalink:"/docs/api/extensions"},next:{title:"Overview",permalink:"/docs/interaction-library/overview"}},p=[{value:"The <code>Translator</code> interface",id:"the-translator-interface",children:[]},{value:"Externalizing strings",id:"externalizing-strings",children:[]},{value:"Using translated strings",id:"using-translated-strings",children:[]}],c={toc:p};function u(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The bot you are developing is likely to be used by people which primary language is not English. To support these users, Botrino encourages the externalization of strings so they can be translated more conveniently."),(0,i.kt)("h2",{id:"the-translator-interface"},"The ",(0,i.kt)("inlineCode",{parentName:"h2"},"Translator")," interface"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Translator")," interface has one abstract method ",(0,i.kt)("inlineCode",{parentName:"p"},"Locale getLocale()")," which defines what is the target locale of the translator, and a default method ",(0,i.kt)("inlineCode",{parentName:"p"},"String translate(String, String, Object...)")," which effectively does the translation. By default, the translate method does the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"default String translate(String bundle, String key, Object... args) {\n    return MessageFormat.format(ResourceBundle.getBundle(bundle, getLocale()).getString(key), args);\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Strings are located in a ",(0,i.kt)("inlineCode",{parentName:"li"},"ResourceBundle")," which name is given. Typically, that's the name of a ",(0,i.kt)("inlineCode",{parentName:"li"},".properties")," file located at the root of the resources folder."),(0,i.kt)("li",{parentName:"ul"},"Strings are parameterized using ",(0,i.kt)("inlineCode",{parentName:"li"},"MessageFormat"),", which aims at being a language-independent way to put variables in a string, unlike ",(0,i.kt)("inlineCode",{parentName:"li"},"String.format()"),".")),(0,i.kt)("h2",{id:"externalizing-strings"},"Externalizing strings"),(0,i.kt)("p",null,"If let's say you have a file named ",(0,i.kt)("inlineCode",{parentName:"p"},"AppStrings.properties")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"src/main/resources")," with the following contents:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-properties"},"hello=Hello {0}!\n")),(0,i.kt)("p",null,"You can use a translator like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'var tr = Translator.to(Locale.ENGLISH);\nSystem.out.println(tr.translate("AppStrings", "hello", "Alex"));\n')),(0,i.kt)("p",null,"Which gives the output:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Hello Alex!\n")),(0,i.kt)("p",null,"What happened here?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The first argument of ",(0,i.kt)("inlineCode",{parentName:"li"},"tr.translate")," is ",(0,i.kt)("inlineCode",{parentName:"li"},"AppStrings"),", so it will look for a ",(0,i.kt)("inlineCode",{parentName:"li"},"ResourceBundle")," named ",(0,i.kt)("inlineCode",{parentName:"li"},"AppStrings"),". It will find the ",(0,i.kt)("inlineCode",{parentName:"li"},"AppStrings.properties")," and will load its content."),(0,i.kt)("li",{parentName:"ul"},"The second argument says to find the string with key ",(0,i.kt)("inlineCode",{parentName:"li"},"hello"),", which is what we defined earlier."),(0,i.kt)("li",{parentName:"ul"},"The third argument will substitute the ",(0,i.kt)("inlineCode",{parentName:"li"},"{0}")," of our string with the value at runtime, here ",(0,i.kt)("inlineCode",{parentName:"li"},"Alex"),".")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"To learn more about resource bundles and string argument formatting, check out the Javadoc for ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ResourceBundle.html"},(0,i.kt)("inlineCode",{parentName:"a"},"ResourceBundle"))," and ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/MessageFormat.html"},(0,i.kt)("inlineCode",{parentName:"a"},"MessageFormat")),". Note that since ",(0,i.kt)("inlineCode",{parentName:"p"},"Translator.translate")," is a default interface method and thus can be overriden, you may customize the way translations are retrieved, but this section will only document the default behavior."))),(0,i.kt)("h2",{id:"using-translated-strings"},"Using translated strings"),(0,i.kt)("p",null,"Once a string is properly externalized, it is possible to add a translation for it by duplicating the resource file and naming it with the locale suffix. For example, if you have ",(0,i.kt)("inlineCode",{parentName:"p"},"src/main/resources/AppStrings.properties")," and want to translate it in French, you will duplicate the file and name the copy ",(0,i.kt)("inlineCode",{parentName:"p"},"src/main/resources/AppStrings_fr.properties"),". The way to name the translated files is documented in the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ResourceBundle.html"},(0,i.kt)("inlineCode",{parentName:"a"},"ResourceBundle")," javadoc"),"."),(0,i.kt)("p",null,"In your ",(0,i.kt)("inlineCode",{parentName:"p"},"AppStrings_fr.properties"),", you will translate the value of the ",(0,i.kt)("inlineCode",{parentName:"p"},"hello")," string:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-properties"},"hello=Bonjour {0} !\n")),(0,i.kt)("p",null,"In your Java code, you can now specify either English or French locale and the string will adapt automatically:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'var tr1 = Translator.to(Locale.ENGLISH);\nvar tr2 = Translator.to(Locale.FRENCH);\nSystem.out.println(tr1.translate("AppStrings", "hello", "Alex"));\nSystem.out.println(tr2.translate("AppStrings", "hello", "Alex")); // notice we use exact same arguments\n')),(0,i.kt)("p",null,"Which gives the output you want:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Hello Alex!\nBonjour Alex !\n")))}u.isMDXComponent=!0}}]);