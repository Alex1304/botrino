"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[879],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=a.createContext({}),d=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=d(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},s=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),s=d(n),u=i,g=s["".concat(c,".").concat(u)]||s[u]||p[u]||r;return n?a.createElement(g,o(o({ref:t},m),{},{components:n})):a.createElement(g,o({ref:t},m))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=s;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var d=2;d<r;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},9216:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return p}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),o=["components"],l={title:"Acknowledging interactions"},c={unversionedId:"interaction-library/acknowledging-interactions",id:"interaction-library/acknowledging-interactions",isDocsHomePage:!1,title:"Acknowledging interactions",description:"When an interaction event is received from the gateway, the library is able to acknowledge them automatically. This allows to simplify your code a lot, as you can directly use createFollowup() or editReply() without worrying about choosing between reply(),  edit(), deferReply() or deferEdit() first. If you have a specific use case that requires you to take full control over the acknowledgment process, the library gets you covered by offering a way to disable automatic acknowledgment on a per-command basis.",source:"@site/docs/interaction-library/acknowledging-interactions.md",sourceDirName:"interaction-library",slug:"/interaction-library/acknowledging-interactions",permalink:"/docs/interaction-library/acknowledging-interactions",editUrl:"https://github.com/Alex1304/botrino/edit/main/website/docs/interaction-library/acknowledging-interactions.md",version:"current",frontMatter:{title:"Acknowledging interactions"},sidebar:"someSidebar",previous:{title:"Creating commands",permalink:"/docs/interaction-library/creating-commands"},next:{title:"Dealing with components",permalink:"/docs/interaction-library/dealing-with-components"}},d=[{value:"Modifying the default acknowledgment behavior",id:"modifying-the-default-acknowledgment-behavior",children:[]},{value:"Overriding the acknowledgment mode on a per-command basis",id:"overriding-the-acknowledgment-mode-on-a-per-command-basis",children:[]}],m={toc:d};function p(e){var t=e.components,n=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"When an interaction event is received from the gateway, the library is able to acknowledge them automatically. This allows to simplify your code a lot, as you can directly use ",(0,r.kt)("inlineCode",{parentName:"p"},"createFollowup()")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"editReply()")," without worrying about choosing between ",(0,r.kt)("inlineCode",{parentName:"p"},"reply()"),",  ",(0,r.kt)("inlineCode",{parentName:"p"},"edit()"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"deferReply()")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"deferEdit()")," first. If you have a specific use case that requires you to take full control over the acknowledgment process, the library gets you covered by offering a way to disable automatic acknowledgment on a per-command basis."),(0,r.kt)("h2",{id:"modifying-the-default-acknowledgment-behavior"},"Modifying the default acknowledgment behavior"),(0,r.kt)("p",null,"This was partially covered in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/interaction-library/configuration"},"Configuration")," page, the default behavior can be set via the ",(0,r.kt)("inlineCode",{parentName:"p"},"default_ack_mode")," field of ",(0,r.kt)("inlineCode",{parentName:"p"},"config.json")," if you are using the Botrino framework, or via ",(0,r.kt)("inlineCode",{parentName:"p"},"InteractionConfig.Builder#defaultACKMode(String)")," when building the configuration manually. Here's a table describing the possible values and their behavior:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"value"),(0,r.kt)("th",{parentName:"tr",align:null},"behavior"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"default")),(0,r.kt)("td",{parentName:"tr",align:null},"Equivalent to ",(0,r.kt)("inlineCode",{parentName:"td"},"defer"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"defer")),(0,r.kt)("td",{parentName:"tr",align:null},"Automatically calls ",(0,r.kt)("inlineCode",{parentName:"td"},"deferReply()")," (for commands) or ",(0,r.kt)("inlineCode",{parentName:"td"},"deferEdit()")," (for components).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"defer_ephemeral")),(0,r.kt)("td",{parentName:"tr",align:null},"Automatically calls ",(0,r.kt)("inlineCode",{parentName:"td"},"deferReply().withEphemeral(true)")," (for commands) or ",(0,r.kt)("inlineCode",{parentName:"td"},"deferEdit().withEphemeral(true)")," (for components).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"none")),(0,r.kt)("td",{parentName:"tr",align:null},"Does not call any acknowledgment method.")))),(0,r.kt)("h2",{id:"overriding-the-acknowledgment-mode-on-a-per-command-basis"},"Overriding the acknowledgment mode on a per-command basis"),(0,r.kt)("p",null,"Let's say you have ",(0,r.kt)("inlineCode",{parentName:"p"},"defer")," as default behavior in your config, and you want to make a command that replies exclusively with ephemeral messages. There would be no way to achieve this without overriding the acknowledgment behavior for this specific command so that it can be ephemeral. This is as simple as adding an ",(0,r.kt)("inlineCode",{parentName:"p"},"@Acknowledge")," annotation with the desired mode as value:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"{9}","{9}":!0},'package testbot1;\n\nimport botrino.interaction.annotation.Acknowledge;\nimport botrino.interaction.annotation.ChatInputCommand;\nimport botrino.interaction.listener.ChatInputInteractionListener;\nimport botrino.interaction.context.ChatInputInteractionContext;\nimport org.reactivestreams.Publisher;\n\n@Acknowledge(Acknowledge.Mode.DEFER_EPHEMERAL)\n@ChatInputCommand(name = "ping", description = "Pings the bot to check if it is alive.")\npublic final class PingCommand implements ChatInputInteractionListener {\n\n    @Override\n    public Publisher<?> run(ChatInputInteractionContext ctx) {\n        return ctx.event().createFollowup("Pong!").withEphemeral(true);\n    }\n}\n')),(0,r.kt)("p",null,"Since this is a very simple command, you could even completely disable automatic acknowledgment and use ",(0,r.kt)("inlineCode",{parentName:"p"},"reply()")," instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"createFollowup()"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'package testbot1;\n\nimport botrino.interaction.annotation.Acknowledge;\nimport botrino.interaction.annotation.ChatInputCommand;\nimport botrino.interaction.listener.ChatInputInteractionListener;\nimport botrino.interaction.context.ChatInputInteractionContext;\nimport org.reactivestreams.Publisher;\n\n@Acknowledge(Acknowledge.Mode.NONE)\n@ChatInputCommand(name = "ping", description = "Pings the bot to check if it is alive.")\npublic final class PingCommand implements ChatInputInteractionListener {\n\n    @Override\n    public Publisher<?> run(ChatInputInteractionContext ctx) {\n        return ctx.event().reply("Pong!").withEphemeral(true);\n    }\n}\n')),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If your command is made of subcommands or subcommand groups, the ",(0,r.kt)("inlineCode",{parentName:"p"},"@Acknowledge")," annotation must be used on the listener implementation class of individual subcommands; putting it on the parent class alongside ",(0,r.kt)("inlineCode",{parentName:"p"},"@ChatInputCommand")," will have no effect."))))}p.isMDXComponent=!0}}]);