"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[476],{4203:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var r=t(4848),i=t(8453);const s={title:"Internationalization"},a=void 0,l={id:"api/i18n",title:"Internationalization",description:"The bot you are developing is likely to be used by people which primary language is not English. To support these users,",source:"@site/docs/api/i18n.mdx",sourceDirName:"api",slug:"/api/i18n",permalink:"/docs/api/i18n",draft:!1,unlisted:!1,editUrl:"https://github.com/Alex1304/botrino/edit/main/website/docs/api/i18n.mdx",tags:[],version:"current",frontMatter:{title:"Internationalization"},sidebar:"someSidebar",previous:{title:"Extensions",permalink:"/docs/api/extensions"},next:{title:"Overview",permalink:"/docs/interaction-library/overview"}},o={},c=[{value:"The <code>Translator</code> interface",id:"the-translator-interface",level:2},{value:"Externalizing strings",id:"externalizing-strings",level:2},{value:"Using translated strings",id:"using-translated-strings",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"The bot you are developing is likely to be used by people which primary language is not English. To support these users,\nBotrino encourages the externalization of strings so they can be translated more conveniently."}),"\n",(0,r.jsxs)(n.h2,{id:"the-translator-interface",children:["The ",(0,r.jsx)(n.code,{children:"Translator"})," interface"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Translator"})," interface has one abstract method ",(0,r.jsx)(n.code,{children:"Locale getLocale()"})," which defines what is the target locale of the\ntranslator, and a default method ",(0,r.jsx)(n.code,{children:"String translate(String, String, Object...)"})," which effectively does the translation.\nBy default, the translate method does the following:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"default String translate(String bundle, String key, Object... args) {\n    return MessageFormat.format(ResourceBundle.getBundle(bundle, getLocale()).getString(key), args);\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Strings are located in a ",(0,r.jsx)(n.code,{children:"ResourceBundle"})," which name is given. Typically, that's the name of a ",(0,r.jsx)(n.code,{children:".properties"})," file\nlocated at the root of the resources folder."]}),"\n",(0,r.jsxs)(n.li,{children:["Strings are parameterized using ",(0,r.jsx)(n.code,{children:"MessageFormat"}),", which aims at being a language-independent way to put variables in a\nstring, unlike ",(0,r.jsx)(n.code,{children:"String.format()"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"externalizing-strings",children:"Externalizing strings"}),"\n",(0,r.jsxs)(n.p,{children:["If let's say you have a file named ",(0,r.jsx)(n.code,{children:"AppStrings.properties"})," in ",(0,r.jsx)(n.code,{children:"src/main/resources"})," with the following contents:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"hello=Hello {0}!\n"})}),"\n",(0,r.jsx)(n.p,{children:"You can use a translator like this:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'var tr = Translator.to(Locale.ENGLISH);\nSystem.out.println(tr.translate("AppStrings", "hello", "Alex"));\n'})}),"\n",(0,r.jsx)(n.p,{children:"Which gives the output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Hello Alex!\n"})}),"\n",(0,r.jsx)(n.p,{children:"What happened here?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The first argument of ",(0,r.jsx)(n.code,{children:"tr.translate"})," is ",(0,r.jsx)(n.code,{children:"AppStrings"}),", so it will look for a ",(0,r.jsx)(n.code,{children:"ResourceBundle"})," named ",(0,r.jsx)(n.code,{children:"AppStrings"}),". It\nwill find the ",(0,r.jsx)(n.code,{children:"AppStrings.properties"})," and will load its content."]}),"\n",(0,r.jsxs)(n.li,{children:["The second argument says to find the string with key ",(0,r.jsx)(n.code,{children:"hello"}),", which is what we defined earlier."]}),"\n",(0,r.jsxs)(n.li,{children:["The third argument will substitute the ",(0,r.jsx)(n.code,{children:"{0}"})," of our string with the value at runtime, here ",(0,r.jsx)(n.code,{children:"Alex"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["To learn more about resource bundles and string argument formatting, check out the Javadoc\nfor ",(0,r.jsx)(n.a,{href:"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ResourceBundle.html",children:(0,r.jsx)(n.code,{children:"ResourceBundle"})}),"\nand ",(0,r.jsx)(n.a,{href:"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/MessageFormat.html",children:(0,r.jsx)(n.code,{children:"MessageFormat"})}),". Note\nthat since ",(0,r.jsx)(n.code,{children:"Translator.translate"})," is a default interface method and thus can be overriden, you may customize the way\ntranslations are retrieved, but this section will only document the default behavior."]})}),"\n",(0,r.jsx)(n.h2,{id:"using-translated-strings",children:"Using translated strings"}),"\n",(0,r.jsxs)(n.p,{children:["Once a string is properly externalized, it is possible to add a translation for it by duplicating the resource file and\nnaming it with the locale suffix. For example, if you have ",(0,r.jsx)(n.code,{children:"src/main/resources/AppStrings.properties"})," and want to\ntranslate it in French, you will duplicate the file and name the copy ",(0,r.jsx)(n.code,{children:"src/main/resources/AppStrings_fr.properties"}),". The\nway to name the translated files is documented in\nthe ",(0,r.jsxs)(n.a,{href:"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ResourceBundle.html",children:[(0,r.jsx)(n.code,{children:"ResourceBundle"})," javadoc"]}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["In your ",(0,r.jsx)(n.code,{children:"AppStrings_fr.properties"}),", you will translate the value of the ",(0,r.jsx)(n.code,{children:"hello"})," string:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"hello=Bonjour {0} !\n"})}),"\n",(0,r.jsx)(n.p,{children:"In your Java code, you can now specify either English or French locale and the string will adapt automatically:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'var tr1 = Translator.to(Locale.ENGLISH);\nvar tr2 = Translator.to(Locale.FRENCH);\nSystem.out.println(tr1.translate("AppStrings", "hello", "Alex"));\nSystem.out.println(tr2.translate("AppStrings", "hello", "Alex")); // notice we use exact same arguments\n'})}),"\n",(0,r.jsx)(n.p,{children:"Which gives the output you want:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Hello Alex!\nBonjour Alex !\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var r=t(6540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);