<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Botrino Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Botrino Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-45YBPVQ8K9","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45YBPVQ8K9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-45YBPVQ8K9",{})</script><title data-react-helmet="true">Extensions | Botrino</title><meta data-react-helmet="true" property="og:url" content="https://botrino.alex1304.com/docs/api/extensions"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Extensions | Botrino"><meta data-react-helmet="true" name="description" content="When you start your application, Botrino automatically loads all the classes present in bot modules. According to the type of classes that are discovered, an action will be performed on them such as registering a service or adding a configuration entry. Extensions allow you to hook into this module scanning process to add your own logic when classes are loaded."><meta data-react-helmet="true" property="og:description" content="When you start your application, Botrino automatically loads all the classes present in bot modules. According to the type of classes that are discovered, an action will be performed on them such as registering a service or adding a configuration entry. Extensions allow you to hook into this module scanning process to add your own logic when classes are loaded."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://botrino.alex1304.com/docs/api/extensions"><link data-react-helmet="true" rel="alternate" href="https://botrino.alex1304.com/docs/api/extensions" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://botrino.alex1304.com/docs/api/extensions" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.aa6b4ed0.css">
<link rel="preload" href="/assets/js/runtime~main.7ccdef54.js" as="script">
<link rel="preload" href="/assets/js/main.3ab302a1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Botrino</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Botrino</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Discover Botrino</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started">Getting Started</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Framework API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/working-with-services">Working with services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/configuring-your-bot">Configuring your bot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/customizing-the-discord-client">Customizing the Discord client</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/api/extensions">Extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/i18n">Internationalization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Interaction library</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/creating-commands">Creating commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/acknowledging-interactions">Acknowledging interactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/dealing-with-components">Dealing with components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/privileges">Privileges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/cooldowns">Cooldowns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/handling-errors">Handling errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/filtering-and-adapting-events">Filtering and adapting events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Command extension [Deprecated]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/creating-commands">Creating commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/input-tokenization">Input tokenization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/subcommands">Subcommands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/privileges">Privileges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/cooldowns">Cooldowns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/handling-errors">Handling errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/filtering-and-adapting-events">Filtering and adapting events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/documenting-commands">Documenting commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/interactive-menus">Interactive menus</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Extensions</h1></header><div class="markdown"><p>When you start your application, Botrino automatically loads all the classes present in bot modules. According to the type of classes that are discovered, an action will be performed on them such as registering a service or adding a configuration entry. Extensions allow you to hook into this module scanning process to add your own logic when classes are loaded.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="declaring-an-extension"></a>Declaring an extension<a class="hash-link" href="#declaring-an-extension" title="Direct link to heading">#</a></h2><p>Unlike other components of the framework, extensions do not need to reside in a module annotated with <code>@BotModule</code>. Think of extensions like plugins for the framework itself and not for your bot application directly. Your module does not need to be <code>open</code> either, extensions are loaded via  <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ServiceLoader.html" target="_blank" rel="noopener noreferrer"><code>java.util.ServiceLoader</code></a>.</p><p>The first step is to create a class implementing the <code>BotrinoExtension</code> interface:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package com.example.myproject;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.api.extension.BotrinoExtension;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import com.github.alex1304.rdi.config.ServiceDescriptor;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import reactor.core.publisher.Mono;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import java.util.Set;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class MyExtension implements BotrinoExtension {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public void onClassDiscovered(Class&lt;?&gt; clazz) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // ...</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public void onServiceCreated(Object o) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // ...</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Set&lt;ServiceDescriptor&gt; provideExtraServices() {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // ...</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Set&lt;Class&lt;?&gt;&gt; provideExtraDiscoverableClasses() {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // ...</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Mono&lt;Void&gt; finishAndJoin() {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // ...</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Before going into the details of the methods to implement, let&#x27;s register this class as a provider for <code>BotrinoExtension</code>. This is done via the <code>module-info.java</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.api.extension.BotrinoExtension;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import com.example.extension.MyExtension;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">module com.example.extension {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    requires botrino.api;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    provides BotrinoExtension with MyExtension;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You don&#x27;t <em>have</em> to create a separate module just for your extension. It is totally fine to add the <code>provides</code> directive directly in your <code>@BotModule</code>, this example just shows that you are not required to.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="implementing-an-extension"></a>Implementing an extension<a class="hash-link" href="#implementing-an-extension" title="Direct link to heading">#</a></h2><p>Let&#x27;s review each of the methods of <code>BotrinoExtension</code> to implement.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="void-onclassdiscoveredclass-clazz"></a><code>void onClassDiscovered(Class&lt;?&gt; clazz)</code><a class="hash-link" href="#void-onclassdiscoveredclass-clazz" title="Direct link to heading">#</a></h3><p>This is a callback method invoked each time a class is discovered in a bot module. In most cases, you will check if this class implements a specific interface or is annotated with a specific annotation, and do some processing when it is relevant to do so.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If you intend to create an instance of the class, it is highly recommended to skip classes annotated with <code>@RdiService</code> from this method, as they are supposed to be instantiated by the RDI container. That&#x27;s why the <code>onServiceCreated(Object)</code> method exists.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="void-onservicecreatedobject-o"></a><code>void onServiceCreated(Object o)</code><a class="hash-link" href="#void-onservicecreatedobject-o" title="Direct link to heading">#</a></h3><p>This is a callback method invoked each time a service is created. It allows to execute some action on the service object right after it&#x27;s created.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>As this method returns <code>void</code>, it is not suited for performing reactive tasks. Instead, store the service object in a field and perform this task in <code>finishAndJoin()</code>.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setservicedescriptor-provideextraservices"></a><code>Set&lt;ServiceDescriptor&gt; provideExtraServices()</code><a class="hash-link" href="#setservicedescriptor-provideextraservices" title="Direct link to heading">#</a></h3><p>Even though the extension may not be inside a bot module, it is still possible to register services that will be exposed to the bot application. You can do so via this method, allowing you to provide a set of <a href="https://alex1304.github.io/rdi/docs/service-descriptors" target="_blank" rel="noopener noreferrer">RDI service descriptors</a>. This method is only useful if you want to provide complex services that require writing raw descriptors (for example registering a class from a third-party library as a service with a custom name). For simple services maintained by yourself, you can use RDI annotations and make the annotated class discoverable via <code>provideExtraDiscoverableClasses()</code> instead of doing it via this method.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setclass-provideextradiscoverableclasses"></a><code>Set&lt;Class&lt;?&gt;&gt; provideExtraDiscoverableClasses()</code><a class="hash-link" href="#setclass-provideextradiscoverableclasses" title="Direct link to heading">#</a></h3><p>With this method you can explicitly specify a set of classes that Botrino will pick up just like if they were inside a bot module. It is guaranteed that each class contained in the set will eventually be passed to the <code>onClassDiscovered(Class)</code> method (unless they have the <code>@Exclude</code> annotation). As said earlier, it can be used as an alternative way to provide extra services, if the class contained in the set is annotated with RDI annotations. It can also be used to register new configuration entries, or new things you&#x27;re defining yourself in your own extension!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="monovoid-finishandjoin"></a><code>Mono&lt;Void&gt; finishAndJoin()</code><a class="hash-link" href="#monovoid-finishandjoin" title="Direct link to heading">#</a></h3><p>This is the last method that is invoked during the startup sequence. It allows you to perform a task, possibly reactive, based on the classes and objects you were able to collect via previous invocations of <code>onClassDiscovered(Class)</code> and <code>onServiceCreated(Object)</code>. The &quot;join&quot; part of this method&#x27;s name indicates the fact that the returned reactive sequence does not need to be a finite source: you can use it to start processes living during the entire lifetime of the application, for example installing event listeners or starting a web server. The subscription to the returned <code>Mono</code> is automatically cancelled once the bot disconnects, allowing the application to shut down properly.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>If an exception is thrown or an error is emitted via the <code>Mono</code> from this method, the exception will propagate to the main thread, which will result in the bot to forcefully disconnect and the application to be terminated.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="a-concrete-example-the-interaction-library"></a>A concrete example: the interaction library<a class="hash-link" href="#a-concrete-example-the-interaction-library" title="Direct link to heading">#</a></h2><p>The <a href="/docs/interaction-library/overview">interaction library</a> of Botrino provides an implementation of <code>BotrinoExtension</code>, which is in charge of collecting the classes implementing <code>XxxInteractionListener</code>, <code>InteractionErrorHandler</code>, <code>InteractionEventProcessor</code> and so on, in order to register them in the <code>InteractionService</code>. It also exposes a new entry in <code>config.json</code> that allows to construct the <a href="/docs/interaction-library/configuration">configuration</a> object.</p><p>You can check the source code of the extension class of the interaction library on GitHub <a href="https://github.com/Alex1304/botrino/blob/main/interaction/src/main/java/botrino/interaction/InteractionExtension.java" target="_blank" rel="noopener noreferrer">here</a>. A few things to note to understand the code:</p><ul><li>Classes with the <code>@RdiService</code> annotation are ignored, since we want to use the instance created by RDI in case <code>XxxInteractionListener</code>, <code>InteractionErrorHandler</code> and <code>InteractionEventProcessor</code> are declared as services.</li><li>An <code>InstanceCache</code> is used so that the same instance can be reused in case a class implements more than one interface.</li><li><code>InteractionService</code> utilizes RDI annotations, so we provide it via <code>provideExtraDiscoverableClasses()</code> and not <code>provideExtraServices()</code>.</li><li>All implementations that were found are finally registered in the <code>finishAndJoin()</code> method, which runs the interaction service at the end.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Alex1304/botrino/edit/main/website/docs/api/extensions.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/api/customizing-the-discord-client"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Customizing the Discord client</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/api/i18n"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Internationalization Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#declaring-an-extension" class="table-of-contents__link">Declaring an extension</a></li><li><a href="#implementing-an-extension" class="table-of-contents__link">Implementing an extension</a><ul><li><a href="#void-onclassdiscoveredclass-clazz" class="table-of-contents__link"><code>void onClassDiscovered(Class&lt;?&gt; clazz)</code></a></li><li><a href="#void-onservicecreatedobject-o" class="table-of-contents__link"><code>void onServiceCreated(Object o)</code></a></li><li><a href="#setservicedescriptor-provideextraservices" class="table-of-contents__link"><code>Set&lt;ServiceDescriptor&gt; provideExtraServices()</code></a></li><li><a href="#setclass-provideextradiscoverableclasses" class="table-of-contents__link"><code>Set&lt;Class&lt;?&gt;&gt; provideExtraDiscoverableClasses()</code></a></li><li><a href="#monovoid-finishandjoin" class="table-of-contents__link"><code>Mono&lt;Void&gt; finishAndJoin()</code></a></li></ul></li><li><a href="#a-concrete-example-the-interaction-library" class="table-of-contents__link">A concrete example: the interaction library</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Alexandre Miranda (Alex1304). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7ccdef54.js"></script>
<script src="/assets/js/main.3ab302a1.js"></script>
</body>
</html>