<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Botrino Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Botrino Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-45YBPVQ8K9","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45YBPVQ8K9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-45YBPVQ8K9",{})</script><title data-react-helmet="true">Creating commands | Botrino</title><meta data-react-helmet="true" property="og:url" content="https://botrino.alex1304.com/docs/command-extension/creating-commands"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Creating commands | Botrino"><meta data-react-helmet="true" name="description" content="Commands represent the main form of interaction that Discord bots have with users. Creating commands is a simple and straightforward process, with the ability to customize different aspects of them."><meta data-react-helmet="true" property="og:description" content="Commands represent the main form of interaction that Discord bots have with users. Creating commands is a simple and straightforward process, with the ability to customize different aspects of them."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://botrino.alex1304.com/docs/command-extension/creating-commands"><link data-react-helmet="true" rel="alternate" href="https://botrino.alex1304.com/docs/command-extension/creating-commands" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://botrino.alex1304.com/docs/command-extension/creating-commands" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.aa6b4ed0.css">
<link rel="preload" href="/assets/js/runtime~main.b52fe0e6.js" as="script">
<link rel="preload" href="/assets/js/main.093a8c3e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Botrino</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Botrino</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Discover Botrino</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started">Getting Started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Framework API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/working-with-services">Working with services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/configuring-your-bot">Configuring your bot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/customizing-the-discord-client">Customizing the Discord client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/extensions">Extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/i18n">Internationalization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Interaction library</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/creating-commands">Creating commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/acknowledging-interactions">Acknowledging interactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/dealing-with-components">Dealing with components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/privileges">Privileges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/cooldowns">Cooldowns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/handling-errors">Handling errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interaction-library/filtering-and-adapting-events">Filtering and adapting events</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Command extension [Deprecated]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/configuration">Configuration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/command-extension/creating-commands">Creating commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/input-tokenization">Input tokenization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/subcommands">Subcommands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/privileges">Privileges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/cooldowns">Cooldowns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/handling-errors">Handling errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/filtering-and-adapting-events">Filtering and adapting events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/documenting-commands">Documenting commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/command-extension/interactive-menus">Interactive menus</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Creating commands</h1></header><div class="markdown"><p>Commands represent the main form of interaction that Discord bots have with users. Creating commands is a simple and straightforward process, with the ability to customize different aspects of them.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="declaring-a-command"></a>Declaring a command<a class="hash-link" href="#declaring-a-command" title="Direct link to heading">#</a></h2><p>To declare a command, two options are possible.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>This subsection only shows how to <strong>declare</strong> commands, they won&#x27;t work until they are <strong>registered</strong>. Registration of commands is documented in the next subsection.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="implementing-the-command-interface"></a>Implementing the <code>Command</code> interface<a class="hash-link" href="#implementing-the-command-interface" title="Direct link to heading">#</a></h3><p>Create a class that implements <code>Command</code> and override the <code>Mono&lt;Void&gt; run(CommandContext)</code> method:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package com.example.myproject;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.Command;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.CommandContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.annotation.Alias;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import reactor.core.publisher.Mono;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import java.util.Set;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@Alias(&quot;ping&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class PingCommand implements Command {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Mono&lt;Void&gt; run(CommandContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.channel().createMessage(&quot;Pong!&quot;).then();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The <code>@Alias</code> annotation allows to specify one or more alias for the command. The <code>run</code> method contains the code of the command itself. Here we are just replying &quot;Pong!&quot; in the same channel the command was sent in.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Instead of using <code>@Alias</code>, it is also possible to override the <code>aliases()</code> default method from <code>Command</code>, which by default reads the value of the annotation. Can be useful if the aliases aren&#x27;t known at compile time. The <code>@Alias</code> annotation will be ignored if <code>aliases()</code> is overriden, unless it calls the super implementation.</p></div></div><p>There are many default methods in the <code>Command</code> interface that you can override to customize different aspects of the command, such as:</p><ul><li><code>documentation(Translator)</code>: allows you to attach a documentation to the command. Useful if you want to make a help command or generate a user manual. The <code>Translator</code> parameter allows you to adapt the documentation to the language of the user. Details on how to implement this method is documented <a href="/docs/command-extension/documenting-commands">here</a>.</li><li><code>privilege()</code>: defines a privilege, in other words a requirement that must be fulfilled in order to be allowed to execute the command. Details on how to implement this method is documented <a href="/docs/command-extension/privileges">here</a>.</li><li><code>scope()</code>: defines where the command can be used. The possible values are: <code>Scope.ANYWHERE</code> (the command can be used anywhere), <code>Scope.DM_ONLY</code> (the command only works in private messages), <code>Scope.GUILD_ONLY</code> (the command only works inside a guild). A command ran outside of its scope will be ignored.</li><li><code>subcommands()</code>: defines subcommands for the command. More details about subcommands can be found <a href="/docs/command-extension/subcommands">here</a>.</li><li><code>errorHandler()</code>: defines a command-specific error handler, overriding the global error handler if it exists. More details about error handlers can be found <a href="/docs/command-extension/handling-errors">here</a>.</li><li><code>cooldown()</code>: defines a cooldown for the command, that is the maximum number of times a command can be used per user within a specific timeframe. More details about cooldowns can be found <a href="/docs/command-extension/cooldowns">here</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inline-commands"></a>Inline commands<a class="hash-link" href="#inline-commands" title="Direct link to heading">#</a></h3><p>Another way to create commands is to create them &quot;inline&quot;, via the static factory methods of <code>Command</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">var ping = Command.of(&quot;ping&quot;, ctx -&gt; ctx.channel().createMessage(&quot;Pong!&quot;).then());</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">var hello = Command.builder(&quot;hello&quot;,</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        ctx -&gt; ctx.channel()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .createMessage(&quot;Hello!&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .then())</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .setScope(Scope.DM_ONLY)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .setCooldown(Cooldown.of(2, Duration.ofSeconds(5)))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The <code>builder</code> allows to access the same features as the default interface methods of <code>Command</code> (privilege, scope, cooldown...).</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Even though <code>Command</code> is technically a functional interface, implementing it as a lambda will not work, because it won&#x27;t be possible to specify an alias for the command. You need to use either <code>Command.of</code> or <code>Command.builder</code>, both accepting an argument for aliases.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="registering-commands"></a>Registering commands<a class="hash-link" href="#registering-commands" title="Direct link to heading">#</a></h2><p>In order for your commands to be recognized, you need to <strong>register</strong> them. Here again, there are different ways to proceed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-toplevelcommand-annotation"></a>The <code>@TopLevelCommand</code> annotation<a class="hash-link" href="#the-toplevelcommand-annotation" title="Direct link to heading">#</a></h3><p>This approach is the most straightforward, but is only relevant for top-level commands (so not for subcommands), and only if you make the command by implementing the interface (so not for inline commands).</p><p>To use it, simply add the <code>@TopLevelCommand</code> annotation on the implementation class:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package com.example.myproject;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.Command;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.CommandContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.annotation.Alias;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.annotation.TopLevelCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import reactor.core.publisher.Mono;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import java.util.Set;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@TopLevelCommand</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@Alias(&quot;ping&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class PingCommand implements Command {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Mono&lt;Void&gt; run(CommandContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.channel().createMessage(&quot;Pong!&quot;).then();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>That&#x27;s it! You can run your bot, the <code>ping</code> command above is fully functional!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="manual-registration-on-the-command-service"></a>Manual registration on the command service<a class="hash-link" href="#manual-registration-on-the-command-service" title="Direct link to heading">#</a></h3><p>In some cases you might want to register your commands manually, for example if you choose to make them inline. To achieve this, you need to inject the <code>CommandService</code> and call the <code>addTopLevelCommand</code> method on it:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package com.example.myproject;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.Command;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.CommandService;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import com.github.alex1304.rdi.finder.annotation.RdiFactory;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import com.github.alex1304.rdi.finder.annotation.RdiService;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import java.util.Set;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@RdiService</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class SampleService {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @RdiFactory</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public SampleService(CommandService commandService) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        var command = Command.of(&quot;ping&quot;, ctx -&gt; ctx.channel()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .createMessage(&quot;Pong!&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .then());</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        commandService.addTopLevelCommand(command);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The code above is 100% functional just like the previous one, now you have an example for both approaches. Feel free to use either approach according to your preferences. The interface approach might be preferred for complex or stateful commands, while the inline approach might be preferred for simple and stateless commands.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="commands-as-a-service"></a>Commands as a service<a class="hash-link" href="#commands-as-a-service" title="Direct link to heading">#</a></h2><p>Classes implementing commands can themselves be declared as services without any issues. For example if you need to access the <code>ConfigContainer</code> in your command, you can do this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package com.example.myproject;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.api.config.ConfigContainer;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.Command;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.CommandContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.annotation.Alias;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.annotation.TopLevelCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.command.config.CommandConfig;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import com.github.alex1304.rdi.finder.annotation.RdiFactory;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import com.github.alex1304.rdi.finder.annotation.RdiService;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import reactor.core.publisher.Mono;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@RdiService</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@TopLevelCommand</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@Alias(&quot;prefix&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class PrefixCommand implements Command {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    private final String prefix;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @RdiFactory</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public PrefixCommand(ConfigContainer configContainer) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        this.prefix = configContainer.get(CommandConfig.class).prefix();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Mono&lt;Void&gt; run(CommandContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.channel()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .createMessage(&quot;The default prefix is &quot; + prefix)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .then();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The command above accesses the configuration to get the default prefix of the bot. You can notice the use of <code>@RdiService</code> on top of the two other annotations, this works totally fine! Don&#x27;t forget the <code>@RdiFactory</code> to inject the configuration container, and you&#x27;re ready to run the bot and try out this command. Ideally, the string inside <code>createMessage</code> should be externalized, but it would needlessly complicate the documentation for this very simple example.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>If you declare a command as a service this way, you are allowed to do anything with it like any other service, for example inject it in other services, or set up <code>@RdiFactory</code> to be a <a href="/docs/api/working-with-services#injecting-a-service-in-a-reactive-static-factory">reactive static method</a> in case the command needs to perform a reactive task in order to be initialized.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Alex1304/botrino/edit/main/website/docs/command-extension/creating-commands.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/command-extension/configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Configuration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/command-extension/input-tokenization"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Input tokenization Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#declaring-a-command" class="table-of-contents__link">Declaring a command</a><ul><li><a href="#implementing-the-command-interface" class="table-of-contents__link">Implementing the <code>Command</code> interface</a></li><li><a href="#inline-commands" class="table-of-contents__link">Inline commands</a></li></ul></li><li><a href="#registering-commands" class="table-of-contents__link">Registering commands</a><ul><li><a href="#the-toplevelcommand-annotation" class="table-of-contents__link">The <code>@TopLevelCommand</code> annotation</a></li><li><a href="#manual-registration-on-the-command-service" class="table-of-contents__link">Manual registration on the command service</a></li></ul></li><li><a href="#commands-as-a-service" class="table-of-contents__link">Commands as a service</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Alexandre Miranda (Alex1304). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b52fe0e6.js"></script>
<script src="/assets/js/main.093a8c3e.js"></script>
</body>
</html>