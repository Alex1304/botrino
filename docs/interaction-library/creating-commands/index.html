<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Botrino Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Botrino Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-45YBPVQ8K9","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45YBPVQ8K9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-45YBPVQ8K9",{})</script><title data-react-helmet="true">Creating commands | Botrino</title><meta data-react-helmet="true" property="og:url" content="https://botrino.alex1304.com/docs/interaction-library/creating-commands"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Creating commands | Botrino"><meta data-react-helmet="true" name="description" content="Commands represent the main form of interaction that Discord bots have with users. Creating commands is a simple and straightforward process, with the ability to customize different aspects of them."><meta data-react-helmet="true" property="og:description" content="Commands represent the main form of interaction that Discord bots have with users. Creating commands is a simple and straightforward process, with the ability to customize different aspects of them."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://botrino.alex1304.com/docs/interaction-library/creating-commands"><link data-react-helmet="true" rel="alternate" href="https://botrino.alex1304.com/docs/interaction-library/creating-commands" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://botrino.alex1304.com/docs/interaction-library/creating-commands" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.aa6b4ed0.css">
<link rel="preload" href="/assets/js/runtime~main.7ccdef54.js" as="script">
<link rel="preload" href="/assets/js/main.3ab302a1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Botrino</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Botrino</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Discover Botrino</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started">Getting Started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Framework API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/working-with-services">Working with services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/configuring-your-bot">Configuring your bot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/customizing-the-discord-client">Customizing the Discord client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/extensions">Extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/i18n">Internationalization</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Interaction library</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/configuration">Configuration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/interaction-library/creating-commands">Creating commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/acknowledging-interactions">Acknowledging interactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/dealing-with-components">Dealing with components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/privileges">Privileges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/cooldowns">Cooldowns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/handling-errors">Handling errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/filtering-and-adapting-events">Filtering and adapting events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Command extension [Deprecated]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/creating-commands">Creating commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/input-tokenization">Input tokenization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/subcommands">Subcommands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/privileges">Privileges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/cooldowns">Cooldowns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/handling-errors">Handling errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/filtering-and-adapting-events">Filtering and adapting events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/documenting-commands">Documenting commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/interactive-menus">Interactive menus</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Creating commands</h1></header><div class="markdown"><p>Commands represent the main form of interaction that Discord bots have with users. Creating commands is a simple and straightforward process, with the ability to customize different aspects of them.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="chat-input-aka-slash-commands"></a>Chat input (aka &quot;slash&quot;) commands<a class="hash-link" href="#chat-input-aka-slash-commands" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basic-command"></a>Basic command<a class="hash-link" href="#basic-command" title="Direct link to heading">#</a></h3><p>A slash command is a command that is triggered when the user sends <code>/command-name</code> in chat. In the library, they are called &quot;chat input commands&quot;.</p><p>Here is an example of a <code>/ping</code> command that makes the bot reply with &quot;Pong!&quot;:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.ChatInputCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.ChatInputInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.ChatInputInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ChatInputCommand(name = &quot;ping&quot;, description = &quot;Pings the bot to check if it is alive.&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class PingCommand implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.event().createFollowup(&quot;Pong!&quot;);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>A chat input command must have a <code>@ChatInputCommand</code> annotation that contains the meta-information required by Discord (name of the command, description, defaultPermission, etc), and must implement the <code>ChatInputInteractionListener</code> interface.</li><li>The <code>run</code> method accepts a <code>ChatInputInteractionContext</code> that holds contextual information on the command being executed, such as the original <code>ChatInputInteractionEvent</code>, the <code>MessageChannel</code> where the interaction happened, the <code>User</code> who initiated the interaction, and a <code>Locale</code> that may have been adapted to the target user (see <a href="/docs/interaction-library/filtering-and-adapting-events">Filtering and adapting events</a>).</li><li>Events are automatically acknowledged by default, so you can directly call <code>createFollowup()</code> without using <code>deferReply()</code> first (<code>reply()</code> will not work unless you disable automatic acknowledgment, see <a href="/docs/interaction-library/acknowledging-interactions">Acknowledging Interactions</a>)</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you are using the Botrino framework, you have nothing else to do, the command will be automatically recognized and registered. Otherwise, you need to manually register it into the <code>InteractionService</code> like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">interactionService.registerChatInputCommand(new PingCommand());</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="command-options"></a>Command options<a class="hash-link" href="#command-options" title="Direct link to heading">#</a></h3><p>A command may accept one or many options, whether they are required or optional. The library provides <code>ChatInputCommandGrammar</code> that allows to inject the option values into the fields of a class that is going to be instantiated when the command is executed. Here is an example of a command using options:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.ChatInputCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.ChatInputInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.grammar.ChatInputCommandGrammar;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.ChatInputInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.command.ApplicationCommandOption;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.discordjson.json.ApplicationCommandOptionData;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import java.util.List;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ChatInputCommand(name = &quot;options&quot;, description = &quot;Option testing&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public class OptionsCommand implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    private final ChatInputCommandGrammar&lt;Options&gt; grammar = ChatInputCommandGrammar.of(Options.class);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return grammar.resolve(ctx.event()).flatMap(options -&gt; ctx.event()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .createFollowup(&quot;Value of `my-string`: &quot; + options.myString));</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public List&lt;ApplicationCommandOptionData&gt; options() {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return grammar.toOptions();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    private static class Options {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        @ChatInputCommandGrammar.Option(</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                type = ApplicationCommandOption.Type.STRING,</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                name = &quot;my-string&quot;,</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                description = &quot;The string argument&quot;,</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                required = true,</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                choices = {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        @ChatInputCommandGrammar.Choice(name = &quot;Choice 1&quot;, stringValue = &quot;1&quot;),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        @ChatInputCommandGrammar.Choice(name = &quot;Choice 2&quot;, stringValue = &quot;2&quot;),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        @ChatInputCommandGrammar.Choice(name = &quot;Choice 3&quot;, stringValue = &quot;3&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        )</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        String myString;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>Create a new class that declares the fields in which you want to inject the option values. It is recommended to use an internal class for better code readability, unless you are re-using the same class for several commands. The class must have a no-arg contructor, and must be declared <code>static</code> if internal. The fields may be <code>private</code>, but you can also omit the access modifier to avoid IDE warnings about the field never being assigned a value.</li><li>Use the annotation <code>@ChatInputCommandGrammar.Option</code> on the field to declare the properties of the option (the type, the name, the description, whether they are required or not, and the array of value choices, if any).</li><li>Create a new <code>ChatInputCommandGrammar</code> and pass the class to the <code>.of()</code> method. You only need to instantiate once, rather than on each command execution.</li><li>In the <code>run(ChatInputInteractionContext)</code> method, call the <code>resolve(ChatInputInteractionEvent)</code> method which will read the options, instantiate the class and inject the values in the annotated fields. You can then use the object to conveniently access the values, as show in the example above.</li><li>Override the <code>options()</code> method from <code>ChatInputInteractionListener</code> and make it return <code>ChatInputCommandGrammar#toOptions()</code>.</li></ol><p>For reference, here is a table associating each <code>ApplicationCommandOption.Type</code> with the type of the field carrying the annotation:</p><table><thead><tr><th>Option type</th><th>Type of annotated field</th></tr></thead><tbody><tr><td><code>STRING</code></td><td><code>java.lang.String</code></td></tr><tr><td><code>INTEGER</code></td><td><code>java.lang.Long</code> (primitive <code>long</code> may be used only if <code>required = true</code>)</td></tr><tr><td><code>NUMBER</code></td><td><code>java.lang.Double</code> (primitive <code>double</code> may be used only if <code>required = true</code>)</td></tr><tr><td><code>BOOLEAN</code></td><td><code>java.lang.Boolean</code> (primitive <code>boolean</code> may be used only if <code>required = true</code>)</td></tr><tr><td><code>USER</code></td><td><code>discord4j.core.object.entity.User</code> (or <code>discord4j.core.object.entity.Member</code> if in a guild)</td></tr><tr><td><code>CHANNEL</code></td><td><code>discord4j.core.object.entity.channel.Channel</code></td></tr><tr><td><code>ROLE</code></td><td><code>discord4j.core.object.entity.Role</code></td></tr><tr><td><code>MENTIONABLE</code></td><td><code>discord4j.common.util.Snowflake</code></td></tr></tbody></table><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Optional options will be filled with <code>null</code> if not specified by the user, which means you cannot use primitive types for <code>INTEGER</code>, <code>NUMBER</code> and <code>BOOLEAN</code> if <code>required = false</code>, otherwise you will get <code>NullPointerException</code>s.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="subcommands-and-subcommand-groups"></a>Subcommands and subcommand groups<a class="hash-link" href="#subcommands-and-subcommand-groups" title="Direct link to heading">#</a></h3><p>Discord allows to create subcommands and subcommand groups to help in organizing the logic of a complex command. Here is an example of a command using subcommands and subcommand groups:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ChatInputCommand(</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        name = &quot;nest&quot;,</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        description = &quot;Subcommand testing&quot;,</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        subcommands = {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                @Subcommand(name = &quot;sub1&quot;, description = &quot;Subcommand 1&quot;, listener = NestCommand.Sub1.class),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                @Subcommand(name = &quot;sub2&quot;, description = &quot;Subcommand 2&quot;, listener = NestCommand.Sub2.class)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        },</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        subcommandGroups = {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                @SubcommandGroup(name = &quot;group1&quot;, description = &quot;Group 1&quot;, subcommands = {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        @Subcommand(name = &quot;sub&quot;, description = &quot;Subcommand&quot;, listener = NestCommand.G1Sub.class)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                })</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class NestCommand {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public static final class Sub1 implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">            return ctx.event().createFollowup(&quot;sub1: pong!&quot;);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public static final class Sub2 implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">            return ctx.event().createFollowup(&quot;sub2: pong!&quot;);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public static final class G1Sub implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">            return ctx.event().createFollowup(&quot;group1 sub: pong!&quot;);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here are the notable differences:</p><ul><li>The class carrying the <code>@ChatInputCommand</code> annotation no longer implements <code>ChatInputInteractionListener</code>. Indeed, as per Discord&#x27;s documentation a base command becomes unusable if subcommands are present.</li><li>The <code>@ChatInputCommand</code> specifies an array of <code>@Subcommand</code> and <code>@SubcommandGroup</code> with their own name and description.</li><li>Subcommands specify the class implementing <code>ChatInputInteractionListener</code> that is going to handle them. In this example they are internal classes, but they can as well be external.</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Here is how you manually register a command containing subcommands when you control the instance of <code>InteractionService</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">interactionService.registerChatInputCommand(new NestCommand(), List.of(</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        new NestCommand.Sub1(),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        new NestCommand.Sub2(),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        new NestCommand.G1Sub()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If you are using the Botrino framework, the subcommand classes must either have a public no-arg constructor or be declared as a service. If the classes are internal, they must be <code>static</code>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="context-menu-commands"></a>Context menu commands<a class="hash-link" href="#context-menu-commands" title="Direct link to heading">#</a></h2><p>Discord currently support two types of context menu commands, one on messages and one on users. It works the same as chat input commands, but you need to use the <code>@MessageCommand</code> and <code>@UserCommand</code> annotations with the <code>MessageInteractionListener</code> and <code>UserInteractionListener</code> interfaces, respectively.</p><p>Context menu commands are actually less complex than chat input ones, since there is no description, no options, no subcommands... Only a name and a run method:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.UserCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.UserInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.UserInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@UserCommand(&quot;Fight&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class FightCommand implements UserInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;?&gt; run(UserInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.event().createFollowup(&quot;You are fighting &lt;@&quot; +</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                ctx.event().getTargetId().asString() + &quot;&gt;&quot;);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you need to do manual registration, it happens via <code>InteractionService#registerMessageCommand(MessageInteractionListener)</code> and <code>InteractionService#registerUserCommand(MessageInteractionListener)</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">interactionService.registerUserCommand(new FightCommand());</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="commands-as-a-service"></a>Commands as a service<a class="hash-link" href="#commands-as-a-service" title="Direct link to heading">#</a></h2><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The following is only applicable if you are using the Botrino framework. See <a href="/docs/api/working-with-services">Working with services</a>.</p></div></div><p>Classes implementing commands can themselves be declared as services without any issues. For example if you need to access the <code>ConfigContainer</code> in your command, you can do this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.api.config.ConfigContainer;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.api.config.object.BotConfig;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.ChatInputCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.ChatInputInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.ChatInputInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import com.github.alex1304.rdi.finder.annotation.RdiFactory;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import com.github.alex1304.rdi.finder.annotation.RdiService;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.gateway.intent.IntentSet;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@RdiService</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ChatInputCommand(name = &quot;intents&quot;, description = &quot;Displays the intents enabled for this bot.&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class IntentsCommand implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    private final long intents;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @RdiFactory</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public IntentsCommand(ConfigContainer configContainer) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        this.intents = configContainer.get(BotConfig.class)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .enabledIntents()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .orElse(IntentSet.nonPrivileged().getRawValue());</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.event().createFollowup(&quot;Intents enabled: &quot; + intents);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The command above accesses the values in the <code>config.json</code> to get the gateway intents enabled for the bot. You can notice the use of <code>@RdiService</code> on top of <code>@ChatInputCommand</code>, this works totally fine! Don&#x27;t forget the <code>@RdiFactory</code> to inject the configuration container, and you&#x27;re ready to run the bot and try out this command.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>If you declare a command as a service this way, you are allowed to do anything with it like any other service, for example inject it in other services, or set up <code>@RdiFactory</code> to be a <a href="/docs/api/working-with-services#injecting-a-service-in-a-reactive-static-factory">reactive static method</a> in case the command needs to perform a reactive task in order to be initialized.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Alex1304/botrino/edit/main/website/docs/interaction-library/creating-commands.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/interaction-library/configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Configuration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/interaction-library/acknowledging-interactions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Acknowledging interactions Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#chat-input-aka-slash-commands" class="table-of-contents__link">Chat input (aka &quot;slash&quot;) commands</a><ul><li><a href="#basic-command" class="table-of-contents__link">Basic command</a></li><li><a href="#command-options" class="table-of-contents__link">Command options</a></li><li><a href="#subcommands-and-subcommand-groups" class="table-of-contents__link">Subcommands and subcommand groups</a></li></ul></li><li><a href="#context-menu-commands" class="table-of-contents__link">Context menu commands</a></li><li><a href="#commands-as-a-service" class="table-of-contents__link">Commands as a service</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Alexandre Miranda (Alex1304). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7ccdef54.js"></script>
<script src="/assets/js/main.3ab302a1.js"></script>
</body>
</html>