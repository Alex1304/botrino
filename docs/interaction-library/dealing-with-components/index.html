<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Botrino Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Botrino Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-45YBPVQ8K9","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45YBPVQ8K9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-45YBPVQ8K9",{})</script><title data-react-helmet="true">Dealing with components | Botrino</title><meta data-react-helmet="true" property="og:url" content="https://botrino.alex1304.com/docs/interaction-library/dealing-with-components"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Dealing with components | Botrino"><meta data-react-helmet="true" name="description" content="The library offers two ways to handle interactions with message components (buttons and select menus)."><meta data-react-helmet="true" property="og:description" content="The library offers two ways to handle interactions with message components (buttons and select menus)."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://botrino.alex1304.com/docs/interaction-library/dealing-with-components"><link data-react-helmet="true" rel="alternate" href="https://botrino.alex1304.com/docs/interaction-library/dealing-with-components" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://botrino.alex1304.com/docs/interaction-library/dealing-with-components" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.aa6b4ed0.css">
<link rel="preload" href="/assets/js/runtime~main.b0625696.js" as="script">
<link rel="preload" href="/assets/js/main.3ab302a1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Botrino</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Botrino Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Botrino</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Discover Botrino</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started">Getting Started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Framework API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/working-with-services">Working with services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/configuring-your-bot">Configuring your bot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/customizing-the-discord-client">Customizing the Discord client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/extensions">Extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/i18n">Internationalization</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Interaction library</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/creating-commands">Creating commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/acknowledging-interactions">Acknowledging interactions</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/interaction-library/dealing-with-components">Dealing with components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/privileges">Privileges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/cooldowns">Cooldowns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/handling-errors">Handling errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interaction-library/filtering-and-adapting-events">Filtering and adapting events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Command extension [Deprecated]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/creating-commands">Creating commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/input-tokenization">Input tokenization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/subcommands">Subcommands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/privileges">Privileges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/cooldowns">Cooldowns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/handling-errors">Handling errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/filtering-and-adapting-events">Filtering and adapting events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/documenting-commands">Documenting commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-extension/interactive-menus">Interactive menus</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Dealing with components</h1></header><div class="markdown"><p>The library offers two ways to handle interactions with message components (buttons and select menus).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="handling-component-interactions-as-regular-commands"></a>Handling component interactions as regular commands<a class="hash-link" href="#handling-component-interactions-as-regular-commands" title="Direct link to heading">#</a></h2><p>The first way is to treat component interactions as regular commands, which consists of declaring a listener that is going to be called every time a component with a specific <code>customId</code> is interacted with. The structure is similar to <a href="/docs/interaction-library/creating-commands">creating commands</a>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.ComponentCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.ButtonInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.ComponentInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ComponentCommand(&quot;clickme&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class ClickMeButtonCommand implements ComponentInteractionListener&lt;Void&gt; {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;Void&gt; run(ButtonInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.event().createFollowup(&quot;Button clicked!&quot;).then();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The class implements <code>ComponentInteractionListener&lt;Void&gt;</code> and overrides <code>run(ButtonInteractionContext)</code> (it has several <code>run()</code> overloads, one for each type of component, here we want a button. For select menus you&#x27;re supposed to override <code>run(SelectMenuInteractionContext)</code>). The <code>@ComponentCommand</code> annotation specifies the customId to listen for. Let&#x27;s make a chat input command to create the message containing the button:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.ChatInputCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.ChatInputInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.ChatInputInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.component.ActionRow;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.component.Button;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ChatInputCommand(name = &quot;create-button&quot;, description = &quot;Create a button.&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class CreateButtonCommand implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.event().createFollowup(&quot;Click the button:&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .withComponents(ActionRow.of(</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        Button.primary(&quot;clickme&quot;, &quot;Click me!&quot;)));</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As usual, unless you are using the Botrino framework, you need to register them manually:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">interactionService.registerComponentCommand(new ClickMeButtonCommand());</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">interactionService.registerChatInputCommand(new CreateButtonCommand());</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Result:</p><img src="/img/clickme.png" alt=""><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The <code>@ComponentCommand</code> annotation is in fact not required if you aren&#x27;t using the Botrino framework. You may as well override the <code>customId()</code> method from <code>ComponentInteractionListener</code>. The annotation is still required when using the Botrino framework, as it will only auto-register listeners containing that annotation, but if you are already overriding <code>customId()</code> you can use <code>@ComponentCommand</code> alone without the value. An example might be more clear:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.ComponentCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.ButtonInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.ComponentInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ComponentCommand // You may omit the customId here...</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class ClickMeButtonCommand implements ComponentInteractionListener&lt;Void&gt; {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public String customId() {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return &quot;clickme&quot;; // ...if you specify it here instead</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;Void&gt; run(ButtonInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.event().createFollowup(&quot;Button clicked!&quot;).then();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="waiting-for-component-interactions-inside-a-command"></a>Waiting for component interactions inside a command<a class="hash-link" href="#waiting-for-component-interactions-inside-a-command" title="Direct link to heading">#</a></h2><p>In many cases, you want to use components as a way to make your commands more interactive, for example if you need confirmation from the user to perform an action. You would need some way to &quot;pause&quot; the execution of your command and resume when the user has given a response by clicking a button or a select menu. This is made easy with the <code>awaitButtonClick(customId)</code> and <code>awaitSelectMenuItems(customId)</code> methods. Here&#x27;s an example of a simple command waiting for the user to select an item and display the value clicked:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.ChatInputCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.ChatInputInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.ChatInputInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.component.ActionRow;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.component.SelectMenu;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.entity.Message;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.spec.InteractionFollowupCreateSpec;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import reactor.core.publisher.Mono;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import java.util.UUID;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import static botrino.interaction.listener.ComponentInteractionListener.selectMenu;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ChatInputCommand(name = &quot;select&quot;, description = &quot;Command for testing select menus&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public class SelectCommand implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        final var customId = UUID.randomUUID().toString();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.event().createFollowup(&quot;Select an option:&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .withComponents(ActionRow.of(SelectMenu.of(customId,</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        SelectMenu.Option.of(&quot;option 1&quot;, &quot;foo&quot;),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        SelectMenu.Option.of(&quot;option 2&quot;, &quot;bar&quot;),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        SelectMenu.Option.of(&quot;option 3&quot;, &quot;baz&quot;))))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .map(Message::getId)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                // Wait until the select menu is interacted with and return the value clicked</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .flatMap(messageId -&gt; ctx.awaitSelectMenuItems(customId)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        .flatMap(items -&gt; ctx.event().createFollowup(&quot;You clicked: &quot; + items.get(0))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                                .then(ctx.event().deleteFollowup(messageId))));</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>Since you want to listen for one specific select menu (and not all select menus with some customId), you generate a customId that is unique for each invocation of the <code>/select</code> command. You can easily generate a random string via <code>java.util.UUID</code>.</li><li>A first followup is sent with the message containing the select menu.</li><li>Once the message has been sent, call <code>awaitSelectMenuItems(customId)</code> with the same customId generated previously. It will wait for the user to interact with the menu and will emit the value clicked.</li><li>The value received is then displayed via a new followup message.</li></ol><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>If you don&#x27;t make the customId unique on each run, there will be conflicts when the <code>/select</code> command is run several times consecutively by the same user in the same channel.</p></div></div><p>Here is another example with <code>awaitButtonClick(customId)</code> that asks the user to confirm when resetting a user&#x27;s nickname:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.UserCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.UserInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.UserInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.component.ActionRow;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.component.Button;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.entity.Message;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import reactor.core.publisher.Mono;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import java.util.UUID;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import static botrino.interaction.listener.ComponentInteractionListener.button;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@UserCommand(&quot;Reset Nickname&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public class ResetNickCommand implements UserInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;?&gt; run(UserInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        final var guildId = ctx.event().getInteraction().getGuildId().orElse(null);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        if (guildId == null) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">            return ctx.event().createFollowup(&quot;Cannot use outside of a guild&quot;);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        final var yesId = UUID.randomUUID().toString();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        final var noId = UUID.randomUUID().toString();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return ctx.event().createFollowup(&quot;Reset the nickname of that user?&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .withComponents(ActionRow.of(</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        Button.primary(yesId, &quot;Yes&quot;),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        Button.secondary(noId, &quot;No&quot;)))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .map(Message::getId)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .flatMap(messageId -&gt; Mono.firstWithValue(</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                                ctx.awaitButtonClick(yesId),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                                ctx.awaitButtonClick(noId))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        .flatMap(buttonClicked -&gt; buttonClicked.equals(yesId) ? ctx.event()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                                .getClient()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                                .getMemberById(guildId, ctx.event().getTargetId())</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                                .flatMap(member -&gt; member.edit().withNicknameOrNull(null))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                                .then(ctx.event().createFollowup(&quot;Nickname reset successful!&quot;))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                                : ctx.event().createFollowup(&quot;Action cancelled&quot;))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        .then(ctx.event().deleteFollowup(messageId)));</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The code is quite self-explanatory: we display two buttons, one for &quot;yes&quot; and one for &quot;no&quot;. We use <code>Mono.firstWithValue</code> to only wait for the first click on either of the two buttons, and depending on which button was clicked, we execute one or the other action.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>There exists a more generic method <code>awaitComponentInteraction</code> that lets you manipulate the underlying interaction context before returning a value. It accepts a <code>ComponentInteractionListener&lt;R&gt;</code> that you can construct via its static methods <code>button(String, Function)</code> and <code>selectMenu(String, Function)</code>, each accepting the customId and a function receiving a <code>ButtonInteractionContext</code> or <code>SelectMenuInteractionContext</code> and producing a value of any type.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pagination-system-with-components"></a>Pagination system with components<a class="hash-link" href="#pagination-system-with-components" title="Direct link to heading">#</a></h2><p>Making a pagination system is one of the most obvious use cases for message components. The library provides a static method <code>MessagePaginator::paginate</code> to build paginated messages easily. See the example below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">package testbot1;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.annotation.ChatInputCommand;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.context.ChatInputInteractionContext;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.listener.ChatInputInteractionListener;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import botrino.interaction.util.MessagePaginator;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.component.ActionRow;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.object.component.Button;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import discord4j.core.spec.MessageCreateSpec;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import org.reactivestreams.Publisher;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">import reactor.core.publisher.Mono;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">@ChatInputCommand(name = &quot;paginate&quot;, description = &quot;Pagination testing&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">public final class PaginateCommand implements ChatInputInteractionListener {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    public Publisher&lt;?&gt; run(ChatInputInteractionContext ctx) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        return MessagePaginator.paginate(ctx, 5, state -&gt; Mono.just(MessageCreateSpec.create()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .withContent(&quot;Page &quot; + (state.getPage() + 1) + &quot;/&quot; + state.getPageCount())</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                .withComponents(ActionRow.of(</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        state.previousButton(customId -&gt; Button.secondary(customId, &quot;&lt;&lt; Previous&quot;)),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        state.nextButton(customId -&gt; Button.secondary(customId, &quot;Next &gt;&gt;&quot;)),</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                        state.closeButton(customId -&gt; Button.danger(customId, &quot;Close&quot;))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">                ))));</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><img src="/img/paginate.png" alt=""><ul><li>The <code>paginate</code> method takes 3 arguments. The first one is the interaction context, the second one is the total number of pages, and the last one is a function that receives a state and produces the message to display. An overload exists allowing you to specify the initial page number (by default it starts at the first page).</li><li>The <code>state</code> holds information on the current state of the paginator, such as the current page number and whether it is active</li><li>To render the buttons, the state exposes three methods to build previous, next and close buttons respectively. The state object controls whether the buttons are enabled or disabled according to whether we are at first page (in which case previous button should be disabled), at last page (in which case next button should be disabled), or if the paginator has already closed, in which case all buttons should be disabled.</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The paginator automatically closes as per the <code>await_component_timeout_seconds</code> value defined in the <a href="/docs/interaction-library/configuration">configuration</a>.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Alex1304/botrino/edit/main/website/docs/interaction-library/dealing-with-components.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/interaction-library/acknowledging-interactions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Acknowledging interactions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/interaction-library/privileges"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Privileges Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#handling-component-interactions-as-regular-commands" class="table-of-contents__link">Handling component interactions as regular commands</a></li><li><a href="#waiting-for-component-interactions-inside-a-command" class="table-of-contents__link">Waiting for component interactions inside a command</a></li><li><a href="#pagination-system-with-components" class="table-of-contents__link">Pagination system with components</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Alex1304/botrino" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Alexandre Miranda (Alex1304). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b0625696.js"></script>
<script src="/assets/js/main.3ab302a1.js"></script>
</body>
</html>